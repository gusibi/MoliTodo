# Changelog

All notable changes to MoliTodo will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [0.8.6] - 2025-08-14

### 🎉 新增功能

#### 日视图功能 (Day View Feature)
- **全新日视图**: 在 UnifiedCalendar 组件中新增日视图，提供专注的单日任务管理体验
- **时间段布局**: 采用与周视图一致的四时段布局（上午、下午、晚上、凌晨）
- **任务详细显示**: 日视图中任务显示更详细的信息，包括时间、优先级等
- **智能导航**: 支持前一天/后一天导航，快速浏览不同日期的任务
- **今日高亮**: 当前日期使用主题色圆形背景突出显示

#### 任务详情弹窗 (Task Details Modal)
- **任务详情弹窗**: 月视图中点击"更多"按钮显示当天所有任务的详情弹窗
- **Font Awesome 图标**: 使用 Font Awesome 图标替代 SVG，保持图标风格一致
- **任务状态显示**: 弹窗中清晰显示任务状态，已完成任务使用删除线效果
- **自定义滚动条**: 弹窗使用细致的主题色滚动条，提升视觉体验
- **键盘支持**: 支持 ESC 键关闭弹窗，提升操作便利性

### ✨ UI/UX 改进

#### 统一的视觉设计
- **三视图切换**: 支持日、周、月三种视图模式无缝切换
- **一致的今日标识**: 日视图和周视图中的今日日期都使用圆形主题色背景
- **任务样式统一**: 日视图中的任务样式与周视图保持完全一致
- **布局优化**: 日视图采用 1:7 的时间标签与任务区域比例，优化空间利用

#### 交互体验增强
- **弹窗交互**: 点击遮罩层、关闭按钮或按 ESC 键都可以关闭任务详情弹窗
- **任务点击**: 弹窗和日视图中的任务都支持点击编辑功能
- **时间段点击**: 日视图中点击空白时间段可以创建该时间段的任务
- **动态高度**: 日视图时间段高度根据任务数量自动调整

### 🔧 技术改进

#### 组件架构优化
- **视图模式扩展**: UnifiedCalendar 组件支持 day、week、month 三种视图模式
- **计算属性增强**: 新增日视图相关的计算属性，优化数据处理性能
- **事件处理统一**: 标准化任务点击、时间段点击等事件处理逻辑
- **状态管理**: 完善的弹窗状态管理和键盘事件处理

#### 样式系统完善
- **CSS 类化**: 将所有内联样式迁移到 CSS 类，提升维护性
- **主题变量**: 使用主题变量确保在不同主题下的一致性
- **自定义滚动条**: 实现跨浏览器兼容的自定义滚动条样式
- **响应式设计**: 确保新功能在不同屏幕尺寸下正常工作

#### 导航逻辑优化
- **智能导航**: 根据当前视图模式自动调整导航逻辑（日/周/月）
- **标题显示**: 动态生成当前视图的标题显示内容
- **今日跳转**: 支持快速跳转到今天的功能

---

## [0.8.3] - 2025-08-14

### 🎨 重大架构重构

#### 统一日历组件 (Unified Calendar Component)
- **全新统一日历**: 使用 `UnifiedCalendar.vue` 组件替代原有的 `MonthlyCalendar.vue` 和 `WeeklyView.vue`
- **一体化设计**: 将周视图和月视图完美融合到单一组件中，提供更一致的用户体验
- **无缝视图切换**: 在同一界面内轻松切换周视图和月视图，无需跳转页面
- **统一交互逻辑**: 标准化任务点击、日期选择、导航等交互行为

#### 纯 CSS 实现优化
- **移除外部依赖**: 完全移除对 FullCalendar 等第三方日历库的依赖
- **原生实现**: 基于纯 Tailwind CSS 和 Vue 3 实现所有日历功能
- **性能提升**: 减少包体积，提高渲染性能和响应速度
- **完全可控**: 所有样式和行为完全自主控制，便于定制和维护

### ✨ UI/UX 改进

#### 统一的日历界面
- **固定头部导航**: 日历头部导航固定不滚动，包含导航按钮、当前时期标题和视图切换按钮
- **智能滚动区域**: 只有日历内容区域可滚动，隐藏滚动条但保持滚动功能
- **一致的视觉风格**: 周视图和月视图使用统一的设计语言和色彩方案
- **响应式布局**: 完美适配不同屏幕尺寸，提供最佳的视觉体验

#### 增强的周视图体验
- **四时段布局**: 采用上午、下午、晚上、凌晨的自然时间分割方式
- **动态高度调整**: 根据任务数量自动调整时间段高度，优化空间利用
- **今日高亮**: 当前日期使用圆形主题色背景突出显示
- **任务悬浮提示**: 鼠标悬停任务时显示详细信息的智能 tooltip

#### 优化的月视图体验
- **清晰的日期网格**: 使用标准的月历布局，直观显示整月任务分布
- **任务数量限制**: 每日最多显示3个任务，超出部分显示"更多"提示
- **状态颜色区分**: 不同任务状态使用不同颜色标识，一目了然
- **智能任务过滤**: 只显示设置了提醒时间的任务，避免信息过载

### 🔧 技术改进

#### 组件架构优化
- **单一职责**: UnifiedCalendar 组件专注于日历显示和交互逻辑
- **状态管理**: 统一管理当前视图、选中日期、导航状态等
- **事件处理**: 标准化任务点击、日期选择、视图切换等事件处理
- **错误处理**: 完善的加载状态、错误状态和重试机制

#### 样式系统重构
- **Tailwind CSS 集成**: 完全使用 Tailwind CSS 类，移除自定义 CSS
- **主题变量**: 使用 CSS 变量实现主题切换，支持明暗模式
- **响应式设计**: 基于 Tailwind 的响应式工具类实现多设备适配
- **组件样式**: 独立的 `unified-calendar.css` 样式文件，便于维护

#### 数据处理优化
- **任务过滤逻辑**: 优化任务数据过滤和分组算法
- **时间处理**: 改进日期时间计算和格式化逻辑
- **性能优化**: 使用计算属性和缓存减少不必要的重新计算

### 🗑️ 移除的组件

#### 已废弃组件
- **MonthlyCalendar.vue**: 原有的月视图组件，功能已整合到 UnifiedCalendar
- **WeeklyView.vue**: 原有的周视图组件，功能已整合到 UnifiedCalendar
- **相关样式文件**: 移除对应的 CSS 文件，统一到新的样式系统

#### 清理的依赖
- **FullCalendar**: 移除 FullCalendar 相关依赖和配置
- **第三方日历库**: 清理所有外部日历组件依赖
- **冗余样式**: 移除不再使用的 CSS 规则和样式文件

### 🔄 迁移说明

#### 自动迁移
- **无缝升级**: 现有用户数据和设置完全保留
- **功能兼容**: 所有原有功能在新组件中完整实现
- **配置保持**: 用户的视图偏好和设置自动迁移

#### 开发者注意事项
- **组件引用**: 更新对日历组件的引用，使用 UnifiedCalendar
- **样式更新**: 如有自定义样式，需要适配新的 CSS 类名
- **事件处理**: 事件名称和参数保持兼容，无需修改业务逻辑

---

## [0.8.2] - 2025-01-27

### ✨ UI/UX 改进

#### 悬浮任务窗口动态高度 (Floating Task Window Dynamic Height)
- **智能高度调整**: 悬浮任务窗口不再使用固定高度，改为根据任务内容动态调整
- **高度约束优化**: 设置最大高度140px，最小高度80px，确保窗口大小合理
- **内容自适应**: 窗口高度完美匹配任务标题、标签和按钮的实际内容高度
- **状态响应**: 任务状态变化（如开始、暂停、完成）时窗口自动调整大小
- **视觉优化**: 消除不必要的空白区域，提供更紧凑的视觉体验

#### 悬浮任务交互增强
- **实时调整**: 任务内容变化时（如标签数量变化）窗口立即响应调整
- **精确计算**: 基于实际任务卡片元素计算高度，避免CSS样式干扰
- **流畅体验**: 窗口大小调整过程平滑自然，无突兀感

### 🔧 技术改进

#### 窗口管理系统优化
- **动态尺寸API**: 新增 `resizeFloatingTaskWindow` IPC方法支持窗口动态调整
- **高度计算算法**: 改进高度计算逻辑，从测量整个容器改为测量实际任务卡片
- **响应式监听**: 添加Vue watch监听器，监控影响内容高度的状态变化
- **容器边距处理**: 精确计算容器padding，确保高度计算准确性

#### 进程间通信增强
- **IPC处理器扩展**: 在主进程中添加窗口尺寸调整处理逻辑
- **预加载脚本更新**: 扩展preload.js API，支持窗口尺寸控制
- **错误处理完善**: 添加窗口调整过程中的异常处理和日志记录

#### Vue组件架构优化
- **计算属性监听**: 监听 `currentStatus`、`isReminderOverdue`、`isTaskOvertime` 等影响显示的状态
- **生命周期管理**: 优化组件挂载和更新时的窗口调整时机
- **性能优化**: 使用防抖机制避免频繁的窗口调整操作

---

## [0.8.1] - 2025-08-10

### 🎉 Major Features Added

#### 月视图功能 (Monthly View Feature)
- **全新月视图**: 新增月历风格的任务视图，提供更直观的月度任务管理体验
- **FullCalendar 集成**: 使用成熟的 FullCalendar 库，提供专业级的日历功能
- **任务日历显示**: 在月历中直观显示带有提醒时间的任务，支持任务状态可视化
- **月份导航**: 支持上一月/下一月导航，以及快速跳转到当前月份
- **任务交互**: 支持点击日期创建任务，点击任务进行编辑
- **状态区分**: 已完成任务使用删除线和降低透明度显示，提供清晰的视觉区分

#### 月视图核心特性
- **智能任务过滤**: 只显示当前月份内设置了提醒时间的任务
- **状态颜色编码**: 不同任务状态使用不同的边框颜色标识（进行中-绿色，暂停-黄色，已完成-灰色）
- **优先级标识**: 高优先级任务使用加粗字体和更宽边框突出显示
- **今日高亮**: 当前日期数字使用圆形主题色背景突出显示
- **响应式设计**: 完美适配桌面端、平板和移动设备

### ✨ UI/UX 改进

#### 视图切换增强
- **月视图按钮**: 在任务管理器中新增月视图切换按钮，与列表视图、看板视图、周视图并列
- **视图状态管理**: 支持在"所有任务"和"计划中"分类下使用月视图
- **已完成任务控制**: 月视图支持显示/隐藏已完成任务的切换功能
- **无缝切换**: 在不同视图间切换时保持搜索和过滤状态

#### 月视图界面优化
- **滚动体验**: 月视图支持垂直滚动，隐藏滚动条但保持滚动功能
- **主题适配**: 完美支持明暗主题切换，使用模板颜色变量确保一致性
- **错误处理**: 提供友好的错误状态显示和重试机制
- **加载状态**: 优雅的加载动画和状态提示

### 🔧 技术改进

#### 月视图架构
- **组件化设计**: 采用 MonthlyView、MonthlyNavigation、MonthlyCalendar 的模块化架构
- **FullCalendar 定制**: 深度定制 FullCalendar 样式，与应用主题完美融合
- **事件系统**: 完整的任务事件处理系统，支持创建、编辑、拖拽等操作
- **数据转换**: 智能的任务数据到日历事件的转换逻辑

#### 样式系统完善
- **统一样式管理**: 所有月视图样式集中在 monthly-calendar.css 中管理
- **Tailwind CSS 集成**: 完全使用 Tailwind CSS 模板颜色，移除硬编码颜色值
- **CSS 类化**: 将所有内联样式迁移到 CSS 类，提升维护性和一致性
- **响应式优化**: 针对不同屏幕尺寸优化布局和交互体验

#### 状态管理扩展
- **月视图状态**: 扩展 taskStore 支持月视图的显示已完成任务状态管理
- **视图模式**: 完善视图模式切换逻辑，支持 weekly 和 monthly 视图状态
- **数据同步**: 确保月视图与其他视图的数据实时同步

---

## [0.7.7] - 2025-08-06

### ✨ UI/UX 改进

#### 悬浮任务卡片视觉优化 (Floating Task Card Visual Enhancement)
- **颜色搭配优化**: 优化悬浮任务卡片的背景色和边框颜色，提高内容可读性和视觉层次
- **留白平衡调整**: 统一悬浮任务卡片的上下左右留白为 `p-2`，实现视觉平衡
- **卡片尺寸扩大**: 将悬浮任务窗口尺寸从 360x120px 扩大到 420x140px，提供更大的内容空间
- **标签字体优化**: 任务标签字体大小调整为 `text-2xs`，使标签更加精致
- **拖拽功能修复**: 修复悬浮任务卡片的拖拽功能，确保窗口移动正常工作

#### Today分类逻辑统一 (Today Category Logic Unification)
- **逻辑一致性**: 统一TaskPanel.vue和SidebarNav.vue中today分类的判断逻辑
- **智能任务筛选**: today分类现在包含今天创建的任务、今天提醒到期的任务以及正在进行中的任务
- **数据同步**: 确保任务面板显示的任务数量与侧边栏计数保持一致

### 🔧 技术改进

#### 样式系统完善
- **Tailwind CSS 扩展**: 在tailwind.config.js中添加自定义 `text-2xs` 字体大小定义
- **CSS 类优化**: 优化悬浮任务相关的CSS类，提升样式维护性
- **响应式布局**: 改进悬浮任务卡片的自适应宽度设计

#### 窗口管理优化
- **窗口尺寸配置**: 优化悬浮任务窗口的默认尺寸设置
- **容器布局**: 改进悬浮任务容器的padding和布局逻辑
- **拖拽区域**: 修复拖拽区域的覆盖范围，确保拖拽功能正常

---

## [0.7.6] - 2025-08-05

### ✨ UI/UX 改进

#### 任务提醒时间联动功能 (Task Reminder Time Linkage)
- **智能时间联动**: 当设置任务日期时，提醒时间自动同步到同一天，提升用户体验
- **时间一致性**: 确保任务日期和提醒时间保持逻辑一致，避免设置错误
- **用户友好**: 减少手动设置步骤，提高任务创建效率


### 🔧 技术改进

#### 任务编辑组件优化
- **TaskEdit.vue 增强**: 优化任务编辑组件中日期和提醒时间的联动逻辑
- **响应式设计**: 确保时间联动功能在不同屏幕尺寸下正常工作
- **状态管理**: 改进日期和时间状态的管理和同步机制

#### 样式系统完善
- **维护性提升**: 移除冗余的自定义 CSS 规则，统一使用 Tailwind CSS 类

---

## [0.7.5] - 2025-08-04

### ✨ UI/UX 改进

#### 周视图滚动优化 (Weekly View Scroll Enhancement)
- **统一滚动容器**: 将左侧时间列和右侧日期内容合并到统一的滚动容器中，实现完美联动滚动
- **隐藏滚动条**: 完全隐藏滚动条但保持滚动功能，避免滚动条挤占内容空间导致与header错位
- **防压缩布局**: 为导航栏、表头和时间槽行添加 `flex-shrink: 0` 属性，确保布局稳定性
- **今天日期突出显示**: 为今天的日期数字添加圆形主题色背景，提升视觉识别度
- **背景色统一**: 统一时间列头部和时间槽标签的背景色，与右侧日期区域保持一致

#### 周视图布局重构
- **模板结构优化**: 重构 `WeeklyGrid.vue` 模板，创建 `weekly-grid-headers` 和 `weekly-grid-content` 布局
- **脚本逻辑简化**: 移除不再需要的 `daySlotRefs` 和 `setDaySlotRef` 函数，简化 `syncSlotHeights` 逻辑
- **CSS样式更新**: 新增网格头部和内容区域样式，优化时间标签和日期槽布局

### 🔧 技术改进

#### 滚动体验优化
- **跨浏览器兼容**: 使用 `scrollbar-width: none`、`-ms-overflow-style: none` 和 `::-webkit-scrollbar` 实现全浏览器滚动条隐藏
- **容器高度管理**: 设置 `max-h-[calc(100vh-200px)]` 确保滚动容器有合适的高度限制
- **内容保护**: 所有关键布局元素添加防压缩属性，确保内容完整显示

#### 视觉一致性提升
- **固定尺寸设计**: 今天日期使用固定的 `w-6 h-6` 圆形背景，确保切换周时header高度不变
- **主题色集成**: 今天日期背景使用 `bg-primary` 和 `text-primary-foreground`，与整体主题保持一致

---

## [0.7.2] - 2025-08-03

### 🎉 Major Features Added

#### 悬浮任务功能 (Floating Task Feature)
- **独立悬浮窗口**: 支持将任务面板中的任务创建为独立的悬浮窗口，方便桌面任务管理
- **右键菜单创建**: 在任务面板中右键点击任务即可创建悬浮任务窗口
- **完整任务功能**: 悬浮窗口包含任务标题、复选框、状态标签、实时计时、操作按钮等完整功能
- **智能提醒显示**: 支持提醒时间显示，过期提醒以红色标识
- **原生拖拽支持**: 使用 Electron 原生拖拽功能实现窗口移动
- **多窗口管理**: 支持同时创建多个悬浮任务窗口，每个任务独立管理

#### 悬浮任务窗口特性
- **置顶显示**: 悬浮任务窗口始终保持在其他窗口之上
- **半透明毛玻璃效果**: 窗口具有半透明背景，提供优雅的视觉体验
- **TaskItem 一致性设计**: 使用与主界面任务项相同的设计风格
- **智能定位**: 新创建的悬浮任务自动随机定位，避免窗口重叠
- **实时数据同步**: 悬浮任务与主任务数据实时同步，状态变更立即反映

### 🔧 技术改进

#### 悬浮任务架构
- **独立窗口管理系统**: 悬浮任务使用独立的窗口管理系统，与悬浮图标分离
- **Vue Router 集成**: 通过 Vue Router 实现悬浮任务页面路由
- **IPC 通信增强**: 新增悬浮任务相关的进程间通信处理
- **资源管理优化**: 窗口关闭时自动清理资源，避免内存泄漏
- **防重复创建**: 同一任务只能创建一个悬浮窗口，重复创建会聚焦现有窗口

### 📚 文档更新
- **悬浮任务功能文档**: 将悬浮任务功能说明文档移至 `docs/` 目录，完善项目文档结构
- **技术实现文档**: 详细记录悬浮任务的架构设计和关键特性

---

## [0.7.0] - 2025-08-02

### 🎉 Major Features Added

#### 清单管理系统 (List Management System)
- **新增清单功能**: 支持创建、编辑、删除自定义清单，更好地组织任务
- **智能分类**: 内置收件箱、今天、进行中等智能视图
- **清单侧边栏**: 全新的左侧导航栏，直观显示所有清单和任务统计
- **清单个性化**: 支持自定义清单颜色和图标
- **任务清单关联**: 任务可以分配到不同清单，支持清单间移动

#### 数据库架构升级
- **自动迁移系统**: 实现数据库版本控制和自动升级机制
- **数据完整性**: 添加备份恢复功能，确保数据安全
- **性能优化**: 新增数据库索引，提升查询性能
- **向后兼容**: 现有数据自动迁移到新架构

#### 增强的任务管理
- **任务元数据**: 支持任务备注和扩展信息存储
- **批量操作**: 支持批量移动任务到不同清单
- **智能搜索**: 搜索功能支持清单范围限制

### ✨ UI/UX 改进

- **全新侧边栏设计**: 清单导航更加直观和美观
- **清单创建对话框**: 支持颜色选择器和图标选择器
- **上下文菜单**: 清单右键菜单支持编辑、删除等操作
- **删除确认**: 删除清单时提供任务处理选项（移动或删除）


### 🔧 技术改进

- **领域驱动设计**: 重构代码架构，分离业务逻辑和基础设施
- **状态管理优化**: 扩展 Vuex store 支持清单状态管理
- **IPC 通信增强**: 新增清单管理相关的进程间通信处理
- **数据缓存策略**: 实现清单和任务数据的智能缓存
- **错误处理**: 完善错误处理和用户反馈机制

---

## [0.6.6] - 2025-08-02

### Added

- 优化悬浮图标拖拽效果



## 反馈与支持

如果您在使用过程中遇到任何问题或有功能建议，欢迎：

- 在 GitHub 上提交 Issue
- 发送邮件到开发团队
- 参与社区讨论

感谢您使用 MoliTodo！
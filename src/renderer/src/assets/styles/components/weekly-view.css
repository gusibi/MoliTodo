/* Weekly View Styles - Apple Calendar Inspired with Tailwind CSS */

/* Main weekly view container */
.weekly-view {
  @apply flex flex-col h-full bg-background rounded-xl overflow-hidden shadow-sm;
}

/* Weekly view content wrapper */
.weekly-view-content {
  @apply flex flex-col h-full overflow-hidden;
}

/* Weekly navigation styles */
.weekly-navigation {
  @apply flex items-center justify-center gap-3 py-3 px-4 bg-background border-b border-border;
  flex-shrink: 0;
}

.weekly-nav-btn {
  @apply flex items-center justify-center w-9 h-9 border border-border bg-card text-foreground rounded-lg cursor-pointer transition-all duration-200 text-sm hover:bg-accent hover:text-accent-foreground hover:border-primary active:scale-95;
}

.weekly-nav-prev,
.weekly-nav-next {
  @apply w-9 p-2;
}

.weekly-nav-today {
  @apply w-auto px-4 font-medium min-w-[60px];
}

.weekly-nav-today-active {
  @apply bg-primary text-primary-foreground border-primary hover:bg-primary/90 hover:border-primary/90;
}

.weekly-nav-range {
  @apply flex items-center justify-center min-w-[200px];
}

.weekly-nav-range-text {
  @apply text-lg font-semibold text-foreground text-center;
}

/* Weekly Grid Container */
.weekly-grid-container {
  @apply flex-1 bg-background flex flex-col h-full;
  /* 确保容器宽度计算包含滚动条 */
  overflow: hidden;
}

/* Headers */
.weekly-grid-headers {
  @apply flex border-b border-border/30;
  flex-shrink: 0;
}

.weekly-time-column-header {
  @apply w-20 px-3 py-2 text-sm font-medium text-muted-foreground bg-background border-r border-border/30 flex items-center justify-center;
}

.weekly-days-header {
  @apply flex-1 flex;
}

.weekly-day-header {
  @apply flex-1 px-3 py-2 text-center border-r border-border/30 last:border-r-0;
}

.weekly-day-header-today {
  @apply bg-primary/5;
}

.weekly-day-name {
  @apply text-xs text-muted-foreground;
}

.weekly-day-number {
  @apply text-sm font-medium;
}

.weekly-day-number-today {
  @apply text-primary font-semibold inline-flex items-center justify-center w-6 h-6 bg-primary text-primary-foreground rounded-full text-xs;
}

/* Scrollable Content */
.weekly-grid-content {
  @apply flex-1 max-h-[calc(100vh-200px)];
  /* 隐藏滚动条但保持滚动功能 */
  overflow-y: auto;
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* IE and Edge */
}

/* 隐藏Webkit浏览器的滚动条 */
.weekly-grid-content::-webkit-scrollbar {
  display: none;
}

.weekly-time-slot-row {
  @apply flex border-b border-border/30 min-h-[80px] transition-all duration-200;
  flex-shrink: 0;
}

.weekly-time-slot-row.expanded {
  @apply min-h-[120px];
}

.weekly-time-slot-label {
  @apply w-20 px-3 py-2 text-xs text-muted-foreground bg-background border-r border-border/30 flex items-start justify-center pt-3;
}

.weekly-day-slots {
  @apply flex-1 flex;
}

.weekly-day-slot {
  @apply flex-1 px-2 py-1 border-r border-border/30 last:border-r-0 relative;
}

.weekly-day-slot-today {
  @apply bg-primary/5;
}

.weekly-day-slot-tasks {
  @apply h-full;
}

.weekly-day-slot-task-list {
  @apply flex flex-col gap-1.5;
}

.weekly-day-slot-more {
  @apply mt-2 px-2 py-1 text-xs text-primary bg-primary/10 rounded-md cursor-pointer text-center transition-colors hover:bg-primary/20 hover:text-primary-foreground;
}

.weekly-day-slot-empty {
  @apply h-full;
}

/* Remove old styles that are no longer needed */

/* Task cards */
.weekly-task-card-base {
  @apply relative bg-card border border-border rounded-md p-2 cursor-pointer transition-all duration-200 overflow-hidden hover:bg-accent/50 hover:-translate-y-px hover:shadow-md;
}

.weekly-task-card-status-bar {
  @apply absolute left-0 top-0 bottom-0 w-1;
}

.weekly-task-card-content {
  @apply ml-2 flex flex-col gap-1;
}

.weekly-task-card-time {
  @apply text-xs font-medium text-muted-foreground;
}

.weekly-task-card-title {
  @apply text-sm text-foreground leading-tight break-words;
}

.weekly-task-card-status-icon {
  @apply absolute top-2 right-2 text-xs text-muted-foreground opacity-70;
}

/* Status-specific task card styles */
.weekly-task-card-todo {
  /* Default styling */
}

.weekly-task-card-doing {
  @apply bg-success/10 hover:bg-success/20;
}

.weekly-task-card-paused {
  @apply bg-warning/10 hover:bg-warning/20;
}

.weekly-task-card-done {
  @apply bg-muted/50 opacity-80 hover:bg-muted/70;
}

/* Empty states */
.weekly-column-empty {
  @apply flex-1 flex flex-col items-center justify-center py-10 px-5 text-muted-foreground text-center;
}

.weekly-column-empty-icon {
  @apply text-2xl mb-2 opacity-50;
}

.weekly-column-empty-text {
  @apply text-xs opacity-70;
}

.weekly-view-empty {
  @apply flex flex-col items-center justify-center py-16 px-5 text-muted-foreground text-center;
}

.weekly-view-empty-icon {
  @apply text-5xl mb-4 opacity-50;
}

.weekly-view-empty-text {
  @apply text-lg font-medium mb-2 text-foreground;
}

.weekly-view-empty-hint {
  @apply text-sm opacity-70 max-w-xs leading-relaxed;
}

/* Loading and error states */
.weekly-view-loading {
  @apply flex flex-col items-center justify-center py-16 text-muted-foreground;
}

.weekly-view-loading i {
  @apply text-2xl mb-3 animate-spin;
}

.weekly-view-error {
  @apply flex flex-col items-center justify-center py-16 px-5 text-muted-foreground text-center;
}

.weekly-view-error-icon {
  @apply text-5xl mb-4 opacity-70;
}

.weekly-view-error-text {
  @apply text-base font-medium mb-4 text-foreground;
}

.weekly-view-retry-btn {
  @apply px-4 py-2 bg-primary text-primary-foreground border-none rounded-md cursor-pointer text-sm transition-colors hover:bg-primary/90 active:scale-95;
}

/* Responsive design */
@media (max-width: 1024px) {
  .weekly-grid-container {
    @apply min-h-[400px];
  }

  .weekly-time-column {
    @apply w-28;
  }

  .weekly-time-column-header {
    @apply py-3 px-2;
  }

  .weekly-day-header {
    @apply py-3 px-2;
  }

  .weekly-day-slot-tasks {
    @apply p-1.5;
  }

  .weekly-time-slot-label {
    @apply px-2 py-1.5;
  }
}

@media (max-width: 768px) {
  .weekly-navigation {
    @apply py-3 px-4 gap-2;
  }

  .weekly-nav-range-text {
    @apply text-base min-w-[150px];
  }

  .weekly-nav-btn {
    @apply w-8 h-8 text-xs;
  }

  .weekly-nav-prev,
  .weekly-nav-next {
    @apply w-8 p-1.5;
  }

  .weekly-nav-today {
    @apply px-3 min-w-[50px];
  }

  .weekly-grid-container {
    @apply min-h-[350px];
  }

  .weekly-time-column {
    @apply w-24;
  }

  .weekly-time-column-header {
    @apply py-2.5 px-1.5;
  }

  .weekly-day-name {
    @apply text-[10px];
  }

  .weekly-day-number {
    @apply text-base;
  }

  .weekly-day-number-today {
    @apply w-7 h-7 text-sm;
  }

  .weekly-day-header {
    @apply py-2.5 px-1.5;
  }

  .weekly-day-slot-tasks {
    @apply p-1;
  }

  .weekly-time-slot-label {
    @apply px-1.5 py-1;
  }

  .weekly-task-card-base {
    @apply p-1.5;
  }

  .weekly-task-card-title {
    @apply text-xs;
  }

  .weekly-task-card-time {
    @apply text-[10px];
  }
}

@media (max-width: 480px) {
  .weekly-navigation {
    @apply py-2 px-3 gap-1.5;
  }

  .weekly-nav-range-text {
    @apply text-sm min-w-[120px];
  }

  .weekly-grid-container {
    @apply min-h-[300px];
  }

  .weekly-time-column {
    @apply w-20;
  }

  .weekly-time-column-header {
    @apply py-2 px-1;
  }

  .weekly-day-name {
    @apply text-[9px];
  }

  .weekly-day-number {
    @apply text-sm;
  }

  .weekly-day-number-today {
    @apply w-6 h-6 text-xs;
  }

  .weekly-day-header {
    @apply py-2 px-1;
  }

  .weekly-day-slot-tasks {
    @apply p-0.5;
  }



  .weekly-time-slot-label {
    @apply px-1 py-0.5 text-[10px];
  }

  .weekly-task-card-base {
    @apply p-1;
  }

  .weekly-task-card-title {
    @apply text-[11px];
  }

  .weekly-task-card-time {
    @apply text-[9px];
  }

  .weekly-view-empty {
    @apply py-10 px-4;
  }

  .weekly-view-empty-icon {
    @apply text-4xl;
  }

  .weekly-view-empty-text {
    @apply text-base;
  }

  .weekly-view-empty-hint {
    @apply text-xs;
  }
}

/* Print styles */
@media print {
  .weekly-view {
    @apply shadow-none border border-border;
  }

  .weekly-navigation {
    @apply hidden;
  }

  .weekly-grid-container {
    min-height: auto;
  }

  .weekly-day-slot {
    min-height: auto;
    break-inside: avoid;
  }

  .weekly-task-card-base {
    @apply shadow-none;
    break-inside: avoid;
  }
}

/* Accessibility improvements */
@media (prefers-reduced-motion: reduce) {

  .weekly-task-card-base,
  .weekly-nav-btn {
    @apply transition-none;
  }

  .weekly-task-card-base:hover {
    @apply transform-none;
  }

  .weekly-nav-btn:active {
    @apply scale-100;
  }

  .weekly-view-loading i {
    @apply animate-none;
  }
}
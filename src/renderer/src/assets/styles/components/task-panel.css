/* Task Panel Component Styles with Tailwind CSS */

/* Task Panel Container */
.task-panel {
  @apply w-80 min-h-[200px] max-h-[80vh] bg-white/90 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/20 flex flex-col overflow-hidden relative select-none;
}

/* Dark mode support */
@media (prefers-color-scheme: dark) {
  .task-panel {
    @apply bg-gray-900/90 border-gray-700/30;
  }
}

/* Panel Header */
.task-panel-header {
  @apply px-6 py-4 pb-3 border-b border-gray-200/50 bg-gray-50/50;
}

@media (prefers-color-scheme: dark) {
  .task-panel-header {
    @apply border-gray-700/50 bg-gray-800/50;
  }
}

.task-panel-title {
  @apply text-lg font-semibold text-gray-900 flex items-center gap-2;
}

@media (prefers-color-scheme: dark) {
  .task-panel-title {
    @apply text-white;
  }
}

.task-panel-title svg {
  @apply text-blue-500;
}

@media (prefers-color-scheme: dark) {
  .task-panel-title svg {
    @apply text-blue-400;
  }
}

.task-panel-count {
  @apply text-sm text-gray-600 font-normal ml-2;
}

@media (prefers-color-scheme: dark) {
  .task-panel-count {
    @apply text-gray-400;
  }
}

/* Quick Add Section */
.task-panel-quick-add {
  @apply px-6 py-4 border-b border-gray-200/50;
}

@media (prefers-color-scheme: dark) {
  .task-panel-quick-add {
    @apply border-gray-700/50;
  }
}

.task-panel-input-container {
  @apply flex gap-2 items-center;
}

.task-panel-input {
  @apply flex-1 px-3 py-2.5 border border-gray-300 rounded-lg text-base bg-white text-gray-900 transition-all duration-200 outline-none placeholder-gray-500;
}

.task-panel-input:focus {
  @apply border-blue-500 ring-2 ring-blue-500/20;
}

@media (prefers-color-scheme: dark) {
  .task-panel-input {
    @apply bg-gray-800 border-gray-600 text-white placeholder-gray-400;
  }
  
  .task-panel-input:focus {
    @apply border-blue-400 ring-blue-400/20;
  }
}

.task-panel-add-btn {
  @apply w-9 h-9 border-0 rounded-lg bg-blue-500 text-white cursor-pointer flex items-center justify-center transition-all duration-200 hover:bg-blue-600 hover:scale-105 active:scale-95;
}

@media (prefers-color-scheme: dark) {
  .task-panel-add-btn {
    @apply bg-blue-600 hover:bg-blue-700;
  }
}

/* Task List Container */
.task-panel-list-container {
  @apply flex-1 min-h-[100px] max-h-[calc(80vh-200px)] overflow-y-auto relative;
}

.task-panel-list {
  @apply py-2;
}

/* Task Items */
.task-panel-item {
  @apply px-6 py-3 border-b border-gray-100 flex items-start gap-3 transition-all duration-200 cursor-pointer relative;
  animation: task-panel-slide-in 0.3s ease-out;
}

.task-panel-item:hover {
  @apply bg-gray-50;
}

.task-panel-item:last-child {
  @apply border-b-0;
}

@media (prefers-color-scheme: dark) {
  .task-panel-item {
    @apply border-gray-800;
  }
  
  .task-panel-item:hover {
    @apply bg-gray-800/50;
  }
}

.task-panel-item.todo {
  @apply border-l-4 border-l-gray-400;
}

.task-panel-item.doing {
  @apply border-l-4 border-l-yellow-500 bg-yellow-50/50;
}

.task-panel-item.done {
  @apply border-l-4 border-l-green-500 bg-green-50/50;
}

@media (prefers-color-scheme: dark) {
  .task-panel-item.doing {
    @apply bg-yellow-900/20;
  }
  
  .task-panel-item.done {
    @apply bg-green-900/20;
  }
}

/* Task Status Indicator */
.task-panel-status-indicator {
  @apply w-5 h-5 cursor-pointer flex items-center justify-center transition-all duration-200 flex-shrink-0 mt-0.5 rounded-full hover:scale-110 hover:bg-blue-100;
}

@media (prefers-color-scheme: dark) {
  .task-panel-status-indicator:hover {
    @apply bg-blue-900/30;
  }
}

.task-panel-item.todo .task-panel-status-indicator {
  @apply text-gray-400;
}

.task-panel-item.doing .task-panel-status-indicator {
  @apply text-yellow-500;
}

.task-panel-item.done .task-panel-status-indicator {
  @apply text-green-500;
}

/* Task Content */
.task-panel-content {
  @apply flex-1 min-w-0 flex flex-col gap-2;
}

/* 主行：包含任务文本和操作按钮 */
.task-panel-main-row {
  @apply flex items-start justify-between gap-2;
}

.task-panel-text-container {
  @apply flex-1 min-w-0;
}

.task-panel-text {
  @apply text-sm text-gray-900 leading-relaxed break-words cursor-pointer;
}

.task-panel-text:hover {
  @apply bg-gray-100 rounded px-1 -mx-1 my-0.5 -my-0.5;
}

@media (prefers-color-scheme: dark) {
  .task-panel-text {
    @apply text-white;
  }
  
  .task-panel-text:hover {
    @apply bg-gray-700;
  }
}

.task-panel-item.done .task-panel-text {
  @apply line-through text-gray-500;
}

@media (prefers-color-scheme: dark) {
  .task-panel-item.done .task-panel-text {
    @apply text-gray-400;
  }
}

.task-panel-edit-input {
  @apply text-sm text-gray-900 leading-relaxed border border-blue-500 rounded px-1 bg-white outline-none w-full;
}

.task-panel-edit-input:focus {
  @apply border-blue-600 ring-2 ring-blue-200;
}

@media (prefers-color-scheme: dark) {
  .task-panel-edit-input {
    @apply text-white bg-gray-800 border-blue-400;
  }
  
  .task-panel-edit-input:focus {
    @apply border-blue-300 ring-blue-400/20;
  }
}

/* Task Meta - 占满整行 */
.task-panel-meta {
  @apply flex items-center gap-2 w-full;
  min-width: 0; /* 允许子元素收缩 */
}

/* 占位元素，推动内容分布 */
.task-panel-meta-spacer {
  @apply flex-1;
}

/* 紧凑模式样式 - 当内容过多时自动应用 */
.task-panel-meta.compact {
  @apply gap-1.5;
}

.task-panel-meta.compact .task-panel-status {
  @apply text-[10px] px-1.5 py-0.5;
}

.task-panel-meta.compact .task-panel-reminder {
  @apply text-xs;
}

.task-panel-meta.compact .task-panel-duration {
  @apply text-xs;
}

.task-panel-status {
  @apply text-xs font-medium px-2 py-0.5 rounded-full uppercase tracking-wide flex-shrink-0;
}

.task-panel-status.status-todo {
  @apply bg-gray-200 text-gray-600;
}

.task-panel-status.status-doing {
  @apply bg-yellow-100 text-yellow-700;
}

.task-panel-status.status-paused {
  @apply bg-orange-100 text-orange-700;
}

.task-panel-status.status-done {
  @apply bg-green-100 text-green-700;
}

@media (prefers-color-scheme: dark) {
  .task-panel-status.status-todo {
    @apply bg-gray-700 text-gray-300;
  }
  
  .task-panel-status.status-doing {
    @apply bg-yellow-900/30 text-yellow-400;
  }
  
  .task-panel-status.status-paused {
    @apply bg-orange-900/30 text-orange-400;
  }
  
  .task-panel-status.status-done {
    @apply bg-green-900/30 text-green-400;
  }
}

.task-panel-duration {
  @apply text-sm text-yellow-600 flex items-center gap-1 flex-shrink min-w-0;
}

@media (prefers-color-scheme: dark) {
  .task-panel-duration {
    @apply text-yellow-400;
  }
}

.task-panel-duration svg {
  @apply w-3 h-3;
}

.task-panel-reminder {
  @apply text-sm text-blue-600 flex items-center gap-1 flex-shrink min-w-0;
}

.task-panel-reminder.overdue {
  @apply text-red-600;
}

@media (prefers-color-scheme: dark) {
  .task-panel-reminder {
    @apply text-blue-400;
  }
  
  .task-panel-reminder.overdue {
    @apply text-red-400;
  }
}

.task-panel-reminder svg {
  @apply w-3 h-3;
}

/* Task Actions - 现在在主行中 */
.task-panel-actions {
  @apply flex gap-1 opacity-0 transition-opacity duration-200 flex-shrink-0;
}

.task-panel-item:hover .task-panel-actions {
  @apply opacity-100;
}

.task-panel-action-btn {
  @apply w-6 h-6 border-0 rounded bg-black/5 cursor-pointer flex items-center justify-center transition-all duration-200 hover:bg-black/10;
}

@media (prefers-color-scheme: dark) {
  .task-panel-action-btn {
    @apply bg-white/5 hover:bg-white/10;
  }
}

.task-panel-action-btn.reminder-btn {
  @apply text-blue-600;
}

.task-panel-action-btn.pause-btn {
  @apply text-orange-600;
}

.task-panel-action-btn.delete-btn {
  @apply text-red-600;
}

@media (prefers-color-scheme: dark) {
  .task-panel-action-btn.reminder-btn {
    @apply text-blue-400;
  }
  
  .task-panel-action-btn.pause-btn {
    @apply text-orange-400;
  }
  
  .task-panel-action-btn.delete-btn {
    @apply text-red-400;
  }
}

/* Empty State */
.task-panel-empty {
  @apply hidden flex-col items-center justify-center px-6 py-10 text-center text-gray-600;
}

.task-panel-empty.show {
  @apply flex;
}

@media (prefers-color-scheme: dark) {
  .task-panel-empty {
    @apply text-gray-400;
  }
}

.task-panel-empty-icon {
  @apply mb-4 text-blue-600 opacity-60;
}

@media (prefers-color-scheme: dark) {
  .task-panel-empty-icon {
    @apply text-blue-400;
  }
}

.task-panel-empty h3 {
  @apply text-lg mb-2 text-gray-900;
}

@media (prefers-color-scheme: dark) {
  .task-panel-empty h3 {
    @apply text-white;
  }
}

.task-panel-empty p {
  @apply text-base text-gray-600;
}

@media (prefers-color-scheme: dark) {
  .task-panel-empty p {
    @apply text-gray-400;
  }
}

/* Reminder Modal */
.task-panel-reminder-modal {
  @apply absolute inset-0 bg-black/50 hidden items-center justify-center z-50 rounded-2xl;
}

.task-panel-reminder-modal.show {
  @apply flex;
}

.task-panel-modal-content {
  @apply w-64 max-w-[85%] max-h-[80%] overflow-y-auto;
}

.task-panel-quick-time-buttons {
  @apply flex gap-2 flex-wrap mt-3;
}

.task-panel-quick-time-btn {
  @apply px-3 py-2 border border-gray-300 rounded-full bg-white text-sm cursor-pointer transition-all duration-200 text-gray-900 hover:bg-blue-500 hover:text-white hover:border-blue-500;
}

@media (prefers-color-scheme: dark) {
  .task-panel-quick-time-btn {
    @apply bg-gray-800 border-gray-600 text-white hover:bg-blue-600 hover:border-blue-600;
  }
}

/* Panel Footer */
.task-panel-footer {
  @apply px-6 py-3 border-t border-gray-200/50 bg-gray-50/50;
}

@media (prefers-color-scheme: dark) {
  .task-panel-footer {
    @apply border-gray-700/50 bg-gray-800/50;
  }
}

.task-panel-footer-stats {
  @apply text-sm text-gray-600 text-center;
}

@media (prefers-color-scheme: dark) {
  .task-panel-footer-stats {
    @apply text-gray-400;
  }
}

/* Scrollbar Styles */
.task-panel-list-container::-webkit-scrollbar {
  @apply w-1;
}

.task-panel-list-container::-webkit-scrollbar-track {
  @apply bg-transparent;
}

.task-panel-list-container::-webkit-scrollbar-thumb {
  @apply bg-black/20 rounded-sm hover:bg-black/30;
}

@media (prefers-color-scheme: dark) {
  .task-panel-list-container::-webkit-scrollbar-thumb {
    @apply bg-white/20 hover:bg-white/30;
  }
}

/* Animations */
@keyframes task-panel-slide-in {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
/* TaskPreviewModal 组件样式 - 现代化设计风格 */

.task-preview-modal-overlay {
  @apply fixed inset-0 bg-black/60 flex items-center justify-center z-50 backdrop-blur-md;
  animation: fadeIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.task-preview-dialog {
  @apply bg-background rounded-3xl shadow-2xl w-full max-w-3xl max-h-[92vh] overflow-hidden flex flex-col border border-border;
  animation: slideIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* 原始输入内容展示区域 */
.task-preview-original-input {
  @apply p-4 bg-muted/30 border-b border-border flex flex-col gap-2 relative;
}

.task-preview-original-label {
  @apply text-xs font-semibold text-muted-foreground uppercase tracking-wider;
}

.task-preview-original-content {
  @apply text-sm text-foreground bg-background p-3 pr-10 rounded-lg border border-border break-words;
}

.task-preview-copy-btn {
  @apply absolute top-5 right-5 w-7 h-7 border-0 rounded-md bg-background hover:bg-accent cursor-pointer flex items-center justify-center transition-all duration-300 text-muted-foreground hover:text-foreground;
}

.task-preview-copy-btn:disabled {
  @apply cursor-not-allowed opacity-50;
}

.task-preview-copy-btn.copy-success {
  @apply bg-green-500 text-white hover:bg-green-500;
}

.task-preview-copy-btn.copy-error {
  @apply bg-destructive text-destructive-foreground hover:bg-destructive;
}

.task-preview-copy-btn.copy-copying {
  @apply bg-primary text-primary-foreground;
}

.copy-icon {
  @apply w-3 h-3 border border-current rounded-sm relative;
}

.copy-icon::after {
  content: '';
  @apply absolute -top-0.5 -right-0.5 w-3 h-3 border border-current rounded-sm bg-background;
}

.copy-icon-success {
  @apply w-3 h-3 relative;
}

.copy-icon-success::before {
  content: '';
  @apply absolute left-0.5 top-1 w-1 h-1.5 border-r-2 border-b-2 border-current rotate-45;
}

.copy-icon-error {
  @apply w-3 h-3 relative;
}

.copy-icon-error::before,
.copy-icon-error::after {
  content: '';
  @apply absolute top-1/2 left-1/2 w-3 h-0.5 bg-current rotate-45;
  transform: translate(-50%, -50%) rotate(45deg);
}

.copy-icon-error::after {
  transform: translate(-50%, -50%) rotate(-45deg);
}

.copy-icon-loading {
  @apply w-3 h-3 border-2 border-current border-t-transparent rounded-full;
  animation: spin 1s linear infinite;
}

.task-preview-dialog-header {
  @apply px-4 py-3 flex items-center justify-between border-b border-border bg-background sticky top-0 z-10;
}

.task-preview-dialog-header h3 {
  @apply text-base font-semibold text-foreground m-0 flex-1 text-center;
}

.task-preview-close-btn {
  @apply w-8 h-8 border-0 rounded-md bg-transparent hover:bg-accent cursor-pointer flex items-center justify-center transition-all duration-200 text-muted-foreground hover:text-foreground;
}

.task-preview-close-btn:hover {
  @apply scale-105;
}

.task-preview-header-btn {
  @apply w-8 h-8 border-0 rounded-md bg-secondary hover:bg-accent cursor-pointer flex items-center justify-center transition-all duration-300 text-sm;
}

.task-preview-header-btn:hover {
  @apply scale-105;
}

.task-preview-header-btn.task-preview-btn-cancel {
  @apply text-muted-foreground hover:text-foreground;
}

.task-preview-header-btn.task-preview-btn-cancel:hover {
  @apply bg-destructive/10 text-destructive;
}

.task-preview-header-btn.task-preview-btn-confirm {
  @apply text-primary;
}

.task-preview-header-btn.task-preview-btn-confirm:hover:not(:disabled) {
  @apply bg-primary text-primary-foreground;
}

.task-preview-header-btn.task-preview-btn-confirm:disabled {
  @apply text-muted-foreground cursor-not-allowed;
}

.task-preview-header-btn.task-preview-btn-confirm:disabled:hover {
  @apply bg-transparent;
}

.task-preview-dialog-body {
  @apply p-4 flex-1 overflow-y-auto flex flex-col gap-3;
}

.task-preview-stats {
  @apply flex items-center justify-center p-3 bg-muted rounded-lg border border-border;
}

.task-preview-count {
  @apply text-sm font-medium text-muted-foreground;
}

.task-preview-loading {
  @apply flex-1 flex flex-col items-center justify-center gap-4 p-12 px-4 min-h-[200px];
}

.task-preview-loading-spinner {
  @apply flex items-center justify-center w-12 h-12 rounded-full bg-muted text-primary text-xl;
}

.loading-circle {
  @apply w-6 h-6 border-2 border-primary border-t-transparent rounded-full;
  animation: spin 1s linear infinite;
}

.task-preview-loading-text {
  @apply text-sm text-muted-foreground text-center m-0;
}

/* 任务列表样式 */
.task-preview-list {
  @apply flex-1 flex flex-col gap-3;
}

.task-preview-item {
  @apply bg-card border border-border rounded-lg p-4 transition-all duration-300 hover:shadow-md hover:border-primary/50 hover:-translate-y-0.5;
}

.task-preview-item:hover {
  @apply transform;
}

.task-preview-row {
  @apply flex items-center gap-3;
}

.task-preview-row + .task-preview-row {
  @apply mt-3;
}

/* 第一行：任务内容 + 操作按钮 */
.task-preview-row-main {
  @apply justify-between;
}

.task-preview-content-wrapper {
  @apply flex-1;
}

.task-preview-actions-wrapper {
  @apply flex-shrink-0;
}

/* 第二行：提醒时间 + 所属清单 */
.task-preview-row-meta {
  @apply justify-start gap-2;
}

.task-preview-meta-item {
  @apply flex items-center gap-2 min-w-36;
}

.task-preview-meta-label {
  @apply text-xs font-medium text-muted-foreground whitespace-nowrap flex-shrink-0 uppercase tracking-wide;
}

/* 第三行：备注 */
.task-preview-row-note {
  @apply justify-start items-center gap-2;
}

.task-preview-note-label {
  @apply text-xs font-medium text-muted-foreground whitespace-nowrap flex-shrink-0 uppercase tracking-wide;
}

.task-preview-input-note {
  @apply flex-1;
}

.task-preview-field {
  @apply flex flex-col gap-2;
}

.task-preview-field-row {
  @apply flex flex-row gap-4 items-end;
}

.task-preview-field-row .task-preview-field {
  @apply flex-1 min-w-0;
}

.task-preview-label {
  @apply text-sm font-medium text-foreground m-0;
}

.task-preview-input,
.task-preview-select,
.task-preview-textarea {
  @apply w-full p-3 px-4 border border-border rounded-lg bg-background text-foreground text-sm transition-all duration-200;
}

.task-preview-input:focus,
.task-preview-select:focus,
.task-preview-textarea:focus {
  @apply outline-none border-primary ring-2 ring-primary/20;
}

.task-preview-input::placeholder,
.task-preview-textarea::placeholder {
  @apply text-muted-foreground;
}

.task-preview-select {
  @apply cursor-pointer;
}

.task-preview-textarea {
  @apply resize-y min-h-12;
}

/* 输入框样式 */
.task-preview-input-main {
  @apply w-full py-2 px-3 border border-border rounded-lg text-base font-medium leading-normal bg-background transition-all duration-200 focus:border-primary focus:ring-2 focus:ring-primary/20 hover:border-accent-foreground;
}

.task-preview-input-main:focus {
  @apply outline-none;
}

.task-preview-input-meta {
  @apply w-full py-2 px-3 border border-border rounded-md text-sm leading-normal bg-background transition-all duration-200 focus:border-primary focus:ring-2 focus:ring-primary/20 hover:border-accent-foreground;
}

.task-preview-input-meta:focus {
  @apply outline-none;
}

.task-preview-select-meta {
  @apply w-full py-2 px-3 border border-border rounded-md text-sm leading-normal bg-background cursor-pointer transition-all duration-200 focus:border-primary focus:ring-2 focus:ring-primary/20 hover:border-accent-foreground;
}

.task-preview-select-meta:focus {
  @apply outline-none;
}

.task-preview-input-note {
  @apply w-full py-2 px-3 border border-border rounded-md text-sm leading-normal bg-background transition-all duration-200 focus:border-primary focus:ring-2 focus:ring-primary/20 hover:border-accent-foreground;
}

.task-preview-input-note:focus {
  @apply outline-none;
}

.task-preview-textarea-note {
  @apply resize-none overflow-hidden;
  min-height: 72px; /* 3行的最小高度 */
  max-height: 240px; /* 10行的最大高度 */
  line-height: 1.5;
}

/* 删除按钮样式 */
.task-preview-delete-btn {
  @apply flex items-center justify-center w-8 h-8 p-0 border-0 rounded-md bg-destructive/10 text-destructive hover:bg-destructive/20 cursor-pointer transition-all duration-200 text-sm;
}

.task-preview-delete-btn:hover {
  @apply scale-105;
}

.task-preview-delete-btn:active {
  @apply scale-95;
}

.task-preview-divider {
  @apply h-px bg-border my-2;
}

.task-preview-footer {
  @apply px-4 py-3 border-t border-border bg-muted/20 flex items-center justify-between;
}

.task-preview-actions {
  @apply flex gap-2;
}

.task-preview-btn {
  @apply px-4 py-2 rounded-md font-medium text-sm cursor-pointer transition-all duration-200 min-w-20 text-center border;
}

.task-preview-btn-secondary {
  @apply bg-secondary text-secondary-foreground border-border hover:bg-accent hover:text-accent-foreground;
}

.task-preview-btn-secondary:hover {
  @apply transform scale-105;
}

.task-preview-btn-primary {
  @apply bg-primary text-primary-foreground border-transparent hover:bg-primary/90;
}

.task-preview-btn-primary:hover:not(:disabled) {
  @apply transform scale-105;
}

.task-preview-btn-primary:disabled {
  @apply bg-muted text-muted-foreground cursor-not-allowed;
}

/* 动画 */
@keyframes fadeIn {
  from {
    opacity: 0;
    backdrop-filter: blur(0px);
  }
  to {
    opacity: 1;
    backdrop-filter: blur(8px);
  }
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateY(-30px) scale(0.9);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.7;
  }
}

/* 加载动画已整合到 .loading-circle 中 */

/* 响应式设计 */
@media (max-width: 768px) {
  .task-preview-dialog {
    @apply w-[95vw] max-w-none m-2.5 max-h-[calc(100vh-20px)];
  }
  
  .task-preview-original-input {
    @apply p-1;
  }
  
  .task-preview-original-content {
    @apply text-xs leading-normal;
  }
  
  .task-preview-list {
    @apply gap-3 p-1;
  }
  
  .task-preview-item {
    @apply p-3;
  }
  
  .task-preview-row {
    @apply gap-2;
  }
  
  .task-preview-row + .task-preview-row {
    @apply mt-2;
  }
  
  .task-preview-row-meta {
    @apply flex-col gap-3;
  }
   
  .task-preview-meta-item {
    @apply min-w-0 w-full flex-col items-start gap-1;
  }
   
  .task-preview-row-note {
    @apply flex-col items-start gap-1;
  }
   
  .task-preview-input-note {
    @apply w-full;
  }
  
  .task-preview-input-main {
    @apply text-xs py-2 px-2.5;
  }
  
  .task-preview-input-meta,
  .task-preview-select-meta,
  .task-preview-input-note {
    @apply text-xs py-1.5 px-2;
  }
  
  .task-preview-delete-btn {
    @apply w-7 h-7 text-xs;
  }
  
  .task-preview-actions {
    @apply flex-col;
  }
  
  .task-preview-btn {
    @apply w-full;
  }
}

/* 流式内容显示区域样式 */
.task-preview-stream-content {
  @apply mb-3 px-3 py-3 bg-muted/30 rounded-lg border border-border;
}

.task-preview-stream-header {
  @apply flex items-center justify-between gap-2 mb-2 font-medium text-muted-foreground hover:text-foreground transition-all duration-200 cursor-pointer;
}

.task-preview-stream-header i:first-child {
  @apply text-primary text-sm;
}

.task-preview-stream-toggle {
  @apply text-muted-foreground transition-all duration-200 hover:text-foreground;
}

.task-preview-stream-toggle.collapsed {
  @apply rotate-180;
}

.task-preview-stream-text {
  @apply p-3 bg-background rounded-md border border-border text-sm text-foreground whitespace-pre-wrap overflow-y-auto max-h-32;
}

.task-preview-waiting-text {
  @apply text-center text-muted-foreground py-4 text-sm;
}

/* Steps 相关样式 */
.task-preview-steps {
  @apply mt-2 border-t border-border pt-2;
}

.task-preview-steps-header {
  @apply flex items-center justify-between gap-2 mb-2 p-2 text-xs font-medium text-muted-foreground hover:text-foreground transition-all duration-200 cursor-pointer bg-muted/10 rounded-md border border-border;
}

.task-preview-steps-toggle {
  @apply text-muted-foreground transition-all duration-200 hover:text-foreground;
}

.task-preview-steps-toggle.collapsed {
  @apply rotate-180;
}

.task-preview-steps-list {
  @apply space-y-2 w-full;
}

.task-preview-step-item {
  @apply flex items-center gap-2 p-2 bg-muted/20 rounded-md border border-border w-full;
}

.task-preview-step-number {
  @apply text-xs font-medium text-muted-foreground min-w-6 text-center;
}

.task-preview-step-content-wrapper {
  @apply flex-1 min-w-0;
}

.task-preview-step-input {
  @apply w-full text-xs py-1.5 px-2 bg-background border border-border rounded focus:outline-none focus:ring-1 focus:ring-primary;
}

.task-preview-step-status-wrapper {
  @apply min-w-20;
}

.task-preview-step-status {
  @apply w-full text-xs py-1.5 px-2 bg-background border border-border rounded focus:outline-none focus:ring-1 focus:ring-primary;
}

.task-preview-step-actions-wrapper {
  @apply flex items-center;
}

.task-preview-step-delete-btn {
  @apply w-6 h-6 border-0 rounded bg-destructive/10 hover:bg-destructive/20 text-destructive cursor-pointer flex items-center justify-center transition-all duration-200 text-xs;
}

.task-preview-step-delete-btn:hover {
  @apply scale-105;
}
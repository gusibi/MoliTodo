# MoliTodo v1.1.4 Release Notes

*Released: September 27, 2025*

## üîß Critical Windows Compatibility Fix

### üêõ Major Bug Fixes

#### Windows SQLite Database Issues
- **Fixed `getLastUpdatedTime is not a function` Error**: Resolved critical error that prevented Windows users from using the application
- **Database Initialization Order**: Fixed initialization sequence where migrations were attempted before base tables were created
- **SQLite Compatibility**: Enhanced SQLite initialization with Windows-specific configurations and optimizations
- **Cross-Platform Path Handling**: Implemented proper path normalization for Windows file system compatibility

#### Database Performance & Reliability
- **Enhanced Error Handling**: Added comprehensive error diagnostics and logging for database operations
- **Windows-Specific Optimizations**: Applied Windows-specific SQLite parameters for better performance and stability
- **File System Operations**: Improved file system operations with proper Windows path handling and permissions
- **Data Integrity**: Strengthened database validation and consistency checks across all platforms

## üõ†Ô∏è Technical Improvements

### Database Infrastructure
- **SQLite Repository Enhancement**: Updated `sqlite-task-repository.js` with improved initialization logic
- **Migration System**: Fixed database migration sequence to prevent `ALTER TABLE` operations on non-existent tables
- **Path Normalization**: Added `normalizePath()` method for consistent cross-platform file path handling
- **Error Diagnostics**: Enhanced error reporting with detailed database operation logging

### Cross-Platform Support
- **Windows File Locking**: Implemented Windows-specific file locking and permission checks
- **Path Separator Handling**: Proper handling of Windows vs Unix path separators
- **Database Configuration**: Platform-specific SQLite configuration for optimal performance
- **Compatibility Testing**: Added comprehensive Windows compatibility testing framework

## üéØ User Impact

### Windows Users
- **Application Functionality Restored**: Windows users can now use MoliTodo without database errors
- **Improved Performance**: Enhanced database operations with Windows-specific optimizations
- **Reliable Data Storage**: Consistent and reliable task data persistence across all operations
- **Error-Free Experience**: Eliminated critical startup and operation errors on Windows systems

### All Platforms
- **Enhanced Stability**: Improved database reliability and error handling across macOS, Windows, and Linux
- **Better Performance**: Optimized SQLite operations for faster task management
- **Robust Error Handling**: Comprehensive error diagnostics and recovery mechanisms
- **Data Integrity**: Strengthened data validation and consistency checks

## üîÑ Technical Details

### Root Cause Analysis
The issue was caused by incomplete SQLite initialization on Windows systems, where the application attempted to call database methods before the repository was fully initialized. This was particularly problematic on Windows due to:

1. **File System Differences**: Windows file locking and permission handling differs from Unix systems
2. **Path Handling**: Windows path separators and file system operations required special handling
3. **SQLite Configuration**: Windows-specific SQLite parameters were needed for optimal performance
4. **Initialization Order**: Database migrations were attempted before base table creation

### Solution Implementation
- **Enhanced Initialization**: Restructured database initialization to ensure proper order of operations
- **Windows-Specific Code**: Added Windows-specific file system and SQLite handling
- **Path Normalization**: Implemented cross-platform path handling with proper separator conversion
- **Error Recovery**: Added comprehensive error handling and recovery mechanisms

## üîÑ Migration Notes

### Automatic Updates
- **Seamless Upgrade**: All existing data and settings are automatically preserved
- **No Configuration Required**: Fixes are applied automatically without user intervention
- **Backward Compatibility**: Full compatibility with existing task data and application settings
- **Instant Relief**: Windows users will immediately experience error-free operation

### Data Safety
- **Zero Data Loss**: All existing tasks, lists, and settings remain intact
- **Database Integrity**: Enhanced validation ensures data consistency during and after upgrade
- **Backup Compatibility**: Existing backup and restore functionality remains unchanged

## üöÄ Installation Notes

### Windows Users
- **Immediate Fix**: This release specifically addresses Windows compatibility issues
- **Standard Installation**: No special installation steps required
- **Performance Improvement**: Noticeable improvement in application startup and operation speed

### macOS Users
Due to unsigned code, macOS users still need to run this command after installation:

```bash
sudo xattr -rd com.apple.quarantine /Applications/MoliTodo.app
```

## üìä Quality Assurance

### Testing Coverage
- **Windows Compatibility**: Comprehensive testing on Windows 10 and Windows 11
- **Database Operations**: Full CRUD operation testing across all platforms
- **Migration Testing**: Verified database migration and initialization processes
- **Performance Testing**: Confirmed improved performance metrics on Windows systems

### Validation
- **Error Resolution**: Confirmed elimination of `getLastUpdatedTime is not a function` error
- **Cross-Platform**: Verified functionality across Windows, macOS, and Linux
- **Data Integrity**: Validated data consistency and reliability across all operations
- **Performance**: Measured and confirmed performance improvements on Windows

---

**Priority**: Critical Fix - Recommended for all Windows users
**Compatibility**: Windows 10+, macOS 10.14+, Linux (Ubuntu 18.04+)
**Download**: [GitHub Releases](https://github.com/gusi/MoliTodo/releases/tag/v1.1.4)